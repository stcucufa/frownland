<!DOCTYPE html>
<html>
    <head>
        <title>VM</title>
        <meta charset="utf8">
        <link rel="stylesheet" href="../test.css">
        <script type="module">

import { test } from "../test.js";
import { VM } from "../../lib/runtime.js";

test("VM()", t => {
    const vm = VM();
    t.equal(vm.clock.now, 0, "clock starts at 0");
});

test("Thread priority queue", t => {
    const vm = VM();
    vm.schedule({ name: "B" }, 40);
    vm.schedule({ name: "C" }, 48);
    vm.schedule({ name: "A" }, 36);
    t.equal(vm.threads.scheduledForward[0].name, "A", "A first");
    t.equal(vm.threads.scheduledForward[0].name, "B", "B second");
    t.equal(vm.threads.scheduledForward[0].name, "C", "C last");
});

        </script>
    </head>
    <body>
        <p><a href="../index.html">Back</a></p>
    </body>
</html>
