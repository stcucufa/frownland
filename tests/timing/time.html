<!DOCTYPE html>
<html>
    <head>
        <title>Time</title>
        <meta charset="utf8">
        <link rel="stylesheet" href="../test.css">
        <script type="module">

import { test } from "../test.js";
import * as time from "../../lib/timing/time.js";

test("time.add(x, y)", t => {
    t.equal(time.add(17, 23), 40, "x resolved, y resolved");
    const u = time.unresolved();
    const v = time.unresolved();
    const dv = time.add(17, v);
    t.equal(time.isUnresolved(dv) && dv !== v, true, "x resolved, y unresolved");
    t.equal(time.add(17, Infinity), Infinity, "x resolved, y indefinite");
    const ud = time.add(u, 23);
    t.equal(time.isUnresolved(ud) && ud !== u, true, "x unresolved, y resolved");
    const uv = time.add(u, v);
    t.equal(time.isUnresolved(uv) && uv !== u && uv !== v, true, "x unresolved, y unresolved");
    t.equal(time.add(u, Infinity), Infinity, "x unresolved, y indefinite");
    t.equal(time.add(Infinity, 23), Infinity, "x indefinite, y resolved");
    t.equal(time.add(Infinity, v), Infinity, "x indefinite, y unresolved");
    t.equal(time.add(Infinity, Infinity), Infinity, "x indefinite, y indefinite");
});

test("time.cmp(x, y)", t => {
    t.below(time.cmp(17, 23), 0, "x resolved < y resolved");
    t.equal(time.cmp(17, 17), 0, "x resolved = y resolved");
    t.above(time.cmp(23, 17), 0, "x resolved > y resolved");
    t.below(time.cmp(17, time.unresolved()), 0, "x resolved < y unresolved");
    t.below(time.cmp(17, Infinity), 0, "x resolved < y indefinite");
    t.above(time.cmp(time.unresolved(), 23), 0, "x unresolved > y resolved");
    t.equal(time.cmp(time.unresolved(), time.unresolved()), 0, "x unresolved = y unresolved");
    t.equal(time.cmp(time.unresolved(), Infinity), 0, "x unresolved = y indefinite");
    t.above(time.cmp(Infinity, 23), 0, "x indefinite > y resolved");
    t.equal(time.cmp(Infinity, time.unresolved()), 0, "x indefinite = y unresolved");
    t.equal(time.cmp(Infinity, Infinity), 0, "x indefinite = y indefinite");
});

test("time.isUnresolved(t)", t => {
    t.equal(time.isUnresolved(time.unresolved()), true, "unresolved time");
    t.equal(time.isUnresolved(17), false, "definite time");
    t.equal(time.isUnresolved(Infinity), false, "indefinite time");
});

test("time.isDefinite(t)", t => {
    t.equal(time.isDefinite(time.unresolved()), false, "unresolved time");
    t.equal(time.isDefinite(17), true, "definite time");
    t.equal(time.isDefinite(Infinity), false, "indefinite time");
});

test("time.isIndefinite(t)", t => {
    t.equal(time.isIndefinite(time.unresolved()), false, "unresolved time");
    t.equal(time.isIndefinite(17), false, "definite time");
    t.equal(time.isIndefinite(Infinity), true, "indefinite time");
});

test("time.max(x, y)", t => {
    const u = time.unresolved();
    const v = time.unresolved();

    t.equal(time.max(17, 23), 23, "x resolved < y resolved");
    t.equal(time.max(17, 17), 17, "x resolved = y resolved");
    t.equal(time.max(23, 17), 23, "x resolved > y resolved");
    t.equal(time.max(17, v), v, "x resolved < y unresolved");
    t.equal(time.max(17, Infinity), Infinity, "x resolved < y indefinite");
    t.equal(time.max(u, 23), u, "x unresolved > y resolved");
    t.equal(time.max(u, v), u, "x unresolved = y unresolved");
    t.equal(time.max(u, Infinity), u, "x unresolved = y indefinite");
    t.equal(time.max(Infinity, 23), Infinity, "x indefinite > y resolved");
    t.equal(time.max(Infinity, v), v, "x indefinite = y unresolved");
    t.equal(time.max(Infinity, Infinity), Infinity, "x indefinite = y indefinite");
});

test("time.unresolved()", t => {
    t.equal(time.unresolved() === time.unresolved(), false, "generate a unique unresolved time");
});

        </script>
    </head>
    <body>
        <p><a href="../index.html">Back</a></p>
    </body>
</html>
