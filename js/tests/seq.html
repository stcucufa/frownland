<!DOCTYPE html>
<html>
    <head>
        <title>Seq</title>
        <meta charset="utf8">
        <link rel="stylesheet" href="test.css">
        <script type="module">

import { test } from "./test.js";
import { K } from "../lib/util.js";
import { Instant, Delay, Par, Seq,dump } from "../lib/score.js";
import { Tape } from "../lib/tape.js";
import { Deck } from "../lib/deck.js";

test("Seq()", t => {
    const seq = Seq();
    t.equal(seq.show(), "Seq/0", "show");
    t.equal(seq.children, [], "no children");
    t.equal(seq.dur, 0, "zero duration");
});

test("Seq(xs)", t => {
    const delay = Delay(17);
    const instant = Instant(x => x * 2);
    const seq = Seq([delay, instant]);
    t.equal(seq.show(), "Seq/2", "show");
    t.equal(seq.children, [delay, instant], "children");
    t.equal(delay.parent, seq, "parent (1)");
    t.equal(instant.parent, seq, "parent (2)");
    t.equal(seq.dur, 17, "duration");
});

test("Seq duration (unresolved and indefinite child durations)", t => {
    t.equal(Seq([Instant(), Delay(23), Seq.fold(), Par.map(), Delay(31).repeat()]).dur, Infinity,
        "indefinite duration (1)");
    t.equal(Seq([Instant(), Delay(23).repeat(), Seq.fold(), Par.map(), Delay(31)]).dur, Infinity,
        "indefinite duration (2)");
    t.undefined(Seq([Instant(), Delay(23), Seq.fold(), Par.map(), Delay(31)]).dur, "unresolved duration");
});

test("Cancel Seq", t => {
    t.skip();
});

test("Prune Seq", t => {
    t.skip();
});

        </script>
    </head>
    <body>
        <p><a href="index.html">Back</a></p>
    </body>
</html>
